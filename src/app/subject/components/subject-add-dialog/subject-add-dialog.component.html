<div class="shadow rounded overflow-hidden">
  <div class="text-center p-4" style="color: #d05834">
    <mat-icon>create</mat-icon>
    <div>
      <span class="h5">Create Subject</span>
    </div>
  </div>
  <div class="p-4" [ngStyle]="{ 'background-color': modalColor }">
    <div mat-dialog-content>
      <form
        enctype="multipart/form-data"
        #createSubjectForm="ngForm"
        (submit)="createSubject(createSubjectForm)"
        id="form"
      >
        <div class="d-flex gap-2 align-items-center">
          <mat-form-field appearance="fill">
            <mat-label>Department</mat-label>
            <mat-select
              name="departmentId"
              [(ngModel)]="department"
              (ngModelChange)="departmentOnChange()"
            >
              <mat-option
                *ngFor="let department of departments"
                [value]="department.id"
                >{{ department.department_code | uppercase }}</mat-option
              >
              <mat-option value=""> None </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-checkbox
            color="primary"
            [(ngModel)]="isElective"
            name="isElective"
            *ngIf="department == 1"
            >Elective</mat-checkbox
          >
        </div>
        <mat-form-field appearance="fill" *ngIf="isElective">
          <mat-label>Elective</mat-label>
          <mat-select name="description" ngModel>
            <mat-option *ngFor="let x of [1, 2, 3, 4, 5]" [value]="x">{{
              "Elective " + x
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Subject Code</mat-label>
          <input
            matInput
            placeholder="Subject Code"
            name="subjectCode"
            ngModel
          />
        </mat-form-field>

        <mat-form-field
          class="example-full-width"
          name="description"
          ngModel
          *ngIf="!isElective"
        >
          <mat-label>Description</mat-label>
          <input
            matInput
            placeholder="Description"
            name="description"
            ngModel
          />
        </mat-form-field>

        <div class="d-flex gap-2">
          <mat-form-field>
            <mat-label>lec units</mat-label>
            <input
              matInput
              placeholder="lec units"
              name="lec_units"
              ngModel
              type="number"
              max="5"
              min="1"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>lab units</mat-label>
            <input
              matInput
              placeholder="lab units"
              name="lab_units"
              ngModel
              type="number"
              max="5"
              min="1"
            />
          </mat-form-field>

          <mat-form-field>
            <mat-label>hrs/week</mat-label>
            <input
              matInput
              placeholder="hrs per week"
              name="hrs_per_week"
              ngModel
              type="number"
              max="5"
              min="1"
            />
          </mat-form-field>
        </div>

        <input
          name="syllabus"
          *ngIf="!isElective"
          #fileInput
          type="file"
          (change)="onFileSelected($event)"
          ngModel
          class="form-control mb-2"
        />
      </form>
      <app-notification
        class="mt-3"
        *ngIf="error$ | async as errorMessage"
        [message]="errorMessage"
        type="error"
        (close)="closeAlert()"
      >
      </app-notification>
      <app-notification
        class="mt-2"
        *ngIf="success$ | async as message"
        [message]="message"
        type="success"
        (close)="closeSuccessAlert()"
      >
      </app-notification>
    </div>
    <div
      mat-dialog-actions
      class="d-flex align-items-center justify-content-center"
    >
      <button
        mat-flat-button
        type="submit"
        form="form"
        color="primary"
        class="text-light"
        style="background-color: #d05834"
      >
        Submit
      </button>
      <button mat-button class="shadow-sm" (click)="onCancel()">Cancel</button>
    </div>
  </div>
</div>
